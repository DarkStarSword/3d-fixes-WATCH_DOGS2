// asmtool.py --fix-wd2-unproject --fix-wd2-camera-pos -i --only-autofixed aac24d08270e98f0-ps.txt
//
// Generated by Microsoft (R) HLSL Shader Compiler 9.30.9200.16384
//
//   using 3Dmigoto v1.2.42 on Tue Dec 27 11:04:04 2016
//
//
// Buffer Definitions: 
//
// cbuffer Viewport
// {
//
//   float4 CameraNearPlaneSize;        // Offset:    0 Size:    16
//   float4x4 DepthTextureTransform;    // Offset:   16 Size:    64 [unused]
//   float4 FSMClipPlanes;              // Offset:   80 Size:    16 [unused]
//   float4 FacettedShadowCastParams;   // Offset:   96 Size:    16 [unused]
//   float4 FogValues0;                 // Offset:  112 Size:    16 [unused]
//   float4 FogValues1;                 // Offset:  128 Size:    16 [unused]
//   float4x4 InvProjectionMatrix;      // Offset:  144 Size:    64
//   float4x4 InvProjectionMatrixDepth; // Offset:  208 Size:    64 [unused]
//   float4x3 InvViewMatrix;            // Offset:  272 Size:    48
//   float4x4 PreviousViewProjectionMatrix;// Offset:  320 Size:    64 [unused]
//   float4x4 ProjectionMatrix;         // Offset:  384 Size:    64
//   float4 RainOcclusionFadeParams;    // Offset:  448 Size:    16 [unused]
//   float4x4 RainOcclusionProjectionMatrix;// Offset:  464 Size:    64 [unused]
//   float4 RainOcclusionShadowMapSize; // Offset:  528 Size:    16 [unused]
//   float4 ReflectionVolumeDebugColors[15];// Offset:  544 Size:   240 [unused]
//   float4 VPosOffset;                 // Offset:  784 Size:    16
//   float4 VPosScale;                  // Offset:  800 Size:    16
//   float4x3 ViewMatrix;               // Offset:  816 Size:    48
//   float4x4 ViewProjectionMatrix;     // Offset:  864 Size:    64 [unused]
//   float4x4 ViewRotProjectionMatrix;  // Offset:  928 Size:    64 [unused]
//   float4x4 ViewRotProjectionMatrixPure;// Offset:  992 Size:    64 [unused]
//   float4 ViewportSize;               // Offset: 1056 Size:    16
//   
//   struct SCameraDistances
//   {
//       
//       float near;                    // Offset: 1072
//       float far;                     // Offset: 1076
//       float view;                    // Offset: 1080
//       float oneOverView;             // Offset: 1084
//
//   } CameraDistances;                 // Offset: 1072 Size:    16
//   
//   struct SReflectionVolume
//   {
//       
//       float4x4 inverseTransform;     // Offset: 1088
//       float3 rcpFadeRangePositive;   // Offset: 1152
//       float textureArrayIndexAsFloat;// Offset: 1164
//       float3 rcpFadeRangeNegative;   // Offset: 1168
//       float fadeFactor;              // Offset: 1180
//       float2 multipliers;            // Offset: 1184
//       uint parallaxCorrection;       // Offset: 1192
//       float padding0;                // Offset: 1196
//
//   } ReflectionVolumes[15];           // Offset: 1088 Size:  1680
//   float3 CameraDirection;            // Offset: 2768 Size:    12 [unused]
//   float DefaultReflectionTextureArrayIndexAsFloat;// Offset: 2780 Size:     4 [unused]
//   float3 CameraPosition;             // Offset: 2784 Size:    12
//   float DynamicCubeMapReflectionTextureMaxMipIndex;// Offset: 2796 Size:     4
//   float3 CullingCameraPosition;      // Offset: 2800 Size:    12 [unused]
//   float ExposedWhitePointOverExposureScale;// Offset: 2812 Size:     4 [unused]
//   float3 FogColorVector;             // Offset: 2816 Size:    12 [unused]
//   float ExposureScale;               // Offset: 2828 Size:     4
//   float3 OppositeFogColorDelta;      // Offset: 2832 Size:    12 [unused]
//   float MaxParaboloidReflectionMipIndex;// Offset: 2844 Size:     4 [unused]
//   float3 SideFogColor;               // Offset: 2848 Size:    12 [unused]
//   float MaxStaticReflectionMipIndex; // Offset: 2860 Size:     4 [unused]
//   float3 SunFogColorDelta;           // Offset: 2864 Size:    12 [unused]
//   float MeasuredExposureScale;       // Offset: 2876 Size:     4 [unused]
//   float3 TemporalFilteringParams;    // Offset: 2880 Size:    12 [unused]
//   float RaindropRippleScale;         // Offset: 2892 Size:     4 [unused]
//   float3 UncompressDepthWeights;     // Offset: 2896 Size:    12 [unused]
//   float ReflectionScaleDistanceMul;  // Offset: 2908 Size:     4 [unused]
//   float3 UncompressDepthWeightsWS;   // Offset: 2912 Size:    12 [unused]
//   float ReflectionScaleStrength;     // Offset: 2924 Size:     4 [unused]
//   float3 ViewPoint;                  // Offset: 2928 Size:    12 [unused]
//   float SkyParaboloidTextureMaxMipIndex;// Offset: 2940 Size:     4
//   float2 DefaultReflectionMultipliers;// Offset: 2944 Size:     8 [unused]
//   bool UseOnlySkyReflection;         // Offset: 2952 Size:     4
//   float2 ReflectionGIControl;        // Offset: 2960 Size:     8 [unused]
//   uint2 SelectedPixel;               // Offset: 2968 Size:     8 [unused]
//
// }
//
// cbuffer SSR
// {
//
//   float4x4 CameraSpaceToPreviousProjectedSpace;// Offset:    0 Size:    64
//   float4x4 ProjectToPixelMatrix;     // Offset:   64 Size:    64
//   float SSRTextureMaxMipIndex;       // Offset:  128 Size:     4
//   bool GameIsPaused;                 // Offset:  132 Size:     4
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim Slot Elements
// ------------------------------ ---------- ------- ----------- ---- --------
// Viewport__DepthVPSampler__SampObj__    sampler      NA          NA    0        1
// ColorClamp                        sampler      NA          NA    1        1
// ColorWrap                         sampler      NA          NA    2        1
// Global__IBLBRDFTexture            texture  float2          2d    0        1
// Viewport__DepthVPSampler__TexObj__    texture  float4          2d    1        1
// Viewport__SkyParaboloidTexture    texture  float4          2d    2        1
// Viewport__DynamicCubeMapReflectionTextureArray    texture  float4   cubearray    3        1
// DeferredLightingBase__ProbeLightingTexture    texture  float4          2d    4        1
// SSR__MotionVectorTexture__TexObj__    texture  float4          2d    5        1
// SSR__SSRDepthTexture__TexObj__    texture  float4          2d    6        1
// SSR__SSRTexture__TexObj__         texture  float4          2d    7        1
// DeferredLightingCommon__AlbedoTexture__TexObj__    texture  float4          2d    8        1
// DeferredLightingCommon__NormalTexture__TexObj__    texture  float4          2d    9        1
// DeferredLightingCommon__OtherTexture__TexObj__    texture  float4          2d   10        1
// Viewport                          cbuffer      NA          NA    0        1
// SSR                               cbuffer      NA          NA    1        1
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Position              0   xyzw        0      POS   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Target                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed
dcl_constantbuffer cb0[185], dynamicIndexed
dcl_constantbuffer cb1[9], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s1, mode_default
dcl_sampler s2, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texturecubearray (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t4
dcl_resource_texture2d (float,float,float,float) t5
dcl_resource_texture2d (float,float,float,float) t6
dcl_resource_texture2d (float,float,float,float) t7
dcl_resource_texture2d (float,float,float,float) t8
dcl_resource_texture2d (float,float,float,float) t9
dcl_resource_texture2d (float,float,float,float) t10
dcl_input_ps_siv linear noperspective v0.xy, position
dcl_output o0.xyzw
dcl_temps 24

// 3DMigoto StereoParams:
dcl_resource_texture2d (float,float,float,float) t125

ld_indexable(texture2d)(float,float,float,float) r20.xyzw, l(0, 0, 0, 0), t125.xyzw


// WATCH_DOGS2 CameraPosition adjustment inserted with DarkStarSword's asmtool.py:
// asmtool.py --fix-wd2-unproject --fix-wd2-camera-pos -i --only-autofixed aac24d08270e98f0-ps.txt

mul r20.w, r20.x, r20.y
mul r22.x, r20.w, cb0[9].x
mul r22.y, r20.w, cb0[10].x
mul r22.z, r20.w, cb0[11].x
mul r22.w, r20.w, cb0[12].x
dp4 r23.x, r22.xyzw, cb0[17].xyzw
dp4 r23.y, r22.xyzw, cb0[18].xyzw
dp4 r23.z, r22.xyzw, cb0[19].xyzw
add r21.xyz, cb0[174].xyz, r23.xyz

mad r0.xy, v0.xyxx, cb0[50].zwzz, cb0[49].zwzz
ftoi r1.xy, v0.xyxx
mov r1.zw, l(0,0,0,0)
ld_indexable(texture2d)(float,float,float,float) r0.z, r1.xyww, t1.zwxy
mov r0.w, l(1.000000)
dp2 r2.x, r0.zwzz, cb0[11].zwzz
dp2 r0.z, r0.zwzz, cb0[12].zwzz
div r0.z, -r2.x, r0.z
mov r2.z, -r0.z
mul r2.xy, r0.xyxx, r2.zzzz
mov r2.w, l(1.000000)
dp4 r3.x, r2.xyzw, cb0[17].xyzw
dp4 r3.y, r2.xyzw, cb0[18].xyzw
dp4 r3.z, r2.xyzw, cb0[19].xyzw
ld_indexable(texture2d)(float,float,float,float) r2.xyzw, r1.xyww, t8.xyzw
ld_indexable(texture2d)(float,float,float,float) r4.xyzw, r1.xyww, t9.xyzw
ld_indexable(texture2d)(float,float,float,float) r5.xyzw, r1.xyww, t10.zyxw
mad r0.z, r5.w, l(255.000000), l(0.500000)
round_ni r0.z, r0.z
ftou r0.z, r0.z
ushr r0.z, r0.z, l(5)
dp3 r0.w, r4.xyzx, r4.xyzx
rsq r0.w, r0.w
mul r6.xyz, r0.wwww, r4.xyzx
ieq r7.xy, r0.zzzz, l(1, 4, 0, 0)
ge r0.w, r2.w, l(0.750000)
add r6.w, r2.w, l(-0.750000)
mad r6.w, r6.w, l(-0.599999905), l(1.000000)
movc r0.w, r0.w, r6.w, l(1.000000)
movc r0.w, r7.y, r0.w, r2.w
movc r0.w, r7.x, l(1.000000), r0.w
add r8.xyz, -r3.xyzx, r21.xyzx
dp3 r6.w, r8.xyzx, r8.xyzx
rsq r6.w, r6.w
mul r8.xyz, r6.wwww, r8.xyzx
mul r9.yzw, r0.wwww, r2.xxyz
if_nz r7.x
  mad r2.x, r4.w, l(0.500000), l(0.500000)
  mad r2.x, r2.x, l(65535.000000), l(0.500000)
  ftou r2.x, r2.x
  and r2.xy, r2.xxxx, l(255, 0x0000ff00, 0, 0)
  utof r2.xy, r2.xyxx
  mul r10.xz, r2.xxyx, l(0.00392156886, 0.000000, 0.0000153186284, 0.000000)
  mul r2.x, r2.w, l(255.000000)
  ftou r2.x, r2.x
  and r2.xy, r2.xxxx, l(15, 240, 0, 0)
  utof r2.xy, r2.xyxx
  mul r10.yw, r2.yyyx, l(0.000000, 0.00416666688, 0.000000, 0.0666666701)
  mov r9.x, r9.y
  mov r2.x, l(0)
else 
  mul r2.z, r5.y, r5.y
  max r5.y, r2.z, l(0.001000)
  ieq r2.z, r0.z, l(2)
  if_nz r2.z
    mad r2.z, r4.w, l(0.500000), l(0.500000)
    mad r2.z, r2.z, l(65535.000000), l(0.500000)
    ftou r2.z, r2.z
    and r7.zw, r2.zzzz, l(0, 0, 255, 0x0000ff00)
    utof r11.xy, r7.zwzz
    mov r11.z, r5.z
    mad r11.xyz, r11.xyzx, l(0.00784313772, 0.0000306372567, 2.000000, 0.000000), l(-1.000000, -1.000000, -1.000000, 0.000000)
    add r2.z, -r2.w, l(1.000000)
    mul r2.z, r2.z, r9.y
    mad r9.x, r2.z, l(0.500000), r9.y
    dp3 r2.z, r11.xyzx, r11.xyzx
    rsq r2.z, r2.z
    mul r10.xzw, r2.zzzz, r11.xxyz
    mov r10.y, l(0)
    mov r5.z, l(0.500000)
    mov r2.x, l(0)
  else 
    ieq r2.z, r0.z, l(3)
    if_nz r2.z
      mad r2.z, r4.w, l(0.500000), l(0.500000)
      mad r2.z, r2.z, l(65535.000000), l(0.500000)
      ftou r2.z, r2.z
      and r11.xyzw, r2.zzzz, l(0x0000f800, 2016, 31, 31)
      utof r11.xyzw, r11.xyzw
      ge r12.xyz, l(1.253950, 81.547195, 2568.089600, 0.000000), r11.wyxw
      mul r2.z, r11.w, l(0.00249675405)
      mad r13.xyz, r11.zyxz, l(0.0322580636, 0.000496031775, 0.0000157510076, 0.000000), l(0.055000, 0.055000, 0.055000, 0.000000)
      mul r13.xyz, r13.xyzx, l(0.947867334, 0.947867334, 0.947867334, 0.000000)
      log r13.xyz, r13.xyzx
      mul r13.xyz, r13.xyzx, l(2.400000, 2.400000, 2.400000, 0.000000)
      exp r13.xyz, r13.xyzx
      movc r10.x, r12.x, r2.z, r13.x
      mul r2.zw, r11.yyyx, l(0.000000, 0.000000, 0.0000383925508, 0.00000121911819)
      movc r10.zw, r12.yyyz, r2.zzzw, r13.yyyz
      mov r10.y, l(0)
      mov r2.x, l(0)
    else 
      if_nz r7.y
        mad r2.z, r4.w, l(32767.000000), l(32767.000000)
        ftou r2.z, r2.z
        and r2.w, r2.z, l(255)
        utof r2.w, r2.w
        mul r2.w, r2.w, l(0.0123199718)
        ubfe r2.z, l(8), l(8), r2.z
        utof r2.z, r2.z
        mad r2.z, r2.z, l(0.0246399436), l(-3.14159274)
        sincos r11.x, r12.x, r2.w
        sincos r13.x, r14.x, r2.z
        mul r14.x, r11.x, r14.x
        mul r14.y, r11.x, r13.x
        mov r14.z, r12.x
        dp3 r2.z, r14.xyzx, r14.xyzx
        rsq r2.z, r2.z
        mul r10.xzw, r2.zzzz, r14.xxyz
        mov r10.y, l(0)
        mov r2.x, l(0)
      else 
        ieq r2.z, r0.z, l(5)
        lt r2.w, r4.z, l(0.900000)
        movc r11.xyz, r2.wwww, l(0,1.000000,0,0), l(1.000000,0,0,0)
        mul r12.xyz, r4.zxyz, r11.xyzx
        mad r11.xyz, r4.yzxy, r11.yzxy, -r12.xyzx
        dp3 r2.w, r11.xyzx, r11.xyzx
        rsq r2.w, r2.w
        mul r11.xyz, r2.wwww, r11.xyzx
        mul r12.xyz, r4.zxyz, r11.yzxy
        mad r4.xyz, r4.yzxy, r11.zxyz, -r12.xyzx
        dp3 r2.w, r4.xyzx, r4.xyzx
        rsq r2.w, r2.w
        mul r4.xyz, r2.wwww, r4.xyzx
        mad r2.w, r4.w, l(2.000000), l(-1.000000)
        mul r2.w, r2.w, l(3.14159274)
        sincos r12.x, r13.x, r2.w
        mul r11.xyz, r11.xyzx, r12.xxxx
        mad r11.xyz, r4.xyzx, r13.xxxx, r11.xyzx
        mad r2.w, r4.w, l(0.500000), l(0.500000)
        mad r2.w, r2.w, l(65535.000000), l(0.500000)
        ftou r2.w, r2.w
        and r4.xy, r2.wwww, l(255, 0x0000ff00, 0, 0)
        utof r4.xy, r4.xyxx
        mul r4.x, r4.x, l(0.00392156886)
        mad r4.z, r4.y, l(0.0000306372567), l(-1.000000)
        movc r4.xy, r0.zzzz, l(0,0,0,0), r4.xzxx
        mov r11.w, r5.x
        mov r4.z, l(0)
        movc r10.xyzw, r2.zzzz, r11.xwyz, r4.xzzz
        mov r4.w, r11.w
        movc r2.xy, r2.zzzz, l(0,0,0,0), r4.ywyy
        mov r5.x, r2.y
      endif 
    endif 
    mov r9.x, r9.y
  endif 
endif 
ld_indexable(texture2d)(float,float,float,float) r4.xyzw, r1.xyww, t4.xyzw
div r11.xyz, r4.xyzx, cb0[176].wwww
dp3 r11.w, r11.xyzx, l(0.212639, 0.715168655, 0.0721923187, 0.000000)
if_nz r7.y
  mul r11.xyz, r9.xzwx, r11.xyzx
  mul r12.xyzw, r11.xyzw, l(0.318309873, 0.318309873, 0.318309873, 0.0572957806)
else 
  if_nz r7.x
    mov_sat r2.yz, r10.xxyx
    mov_sat r2.w, r5.x
    log r4.xyz, r9.xzwx
    mul r7.yzw, r2.zzzz, r4.xxyz
    mul r7.yzw, r7.yyzw, l(0.000000, -12.780000, -12.780000, -12.780000)
    mad r4.xyz, r4.xyzx, l(-0.020000, -0.020000, -0.020000, 0.000000), r7.yzwy
    eq r2.z, r2.y, l(0.000000)
    add r2.w, -r2.w, l(1.000000)
    mul r7.yzw, r2.wwww, r9.xxzw
    mul r7.yzw, r7.yyzw, l(0.000000, 0.318309873, 0.318309873, 0.318309873)
    mul r4.xyz, -r2.yyyy, r4.xyzx
    exp r4.xyz, r4.xyzx
    mul r4.xyz, r7.yzwy, r4.xyzx
    mul r4.xyz, r4.xyzx, l(0.444444448, 0.444444448, 0.444444448, 0.000000)
    movc r13.xyz, r2.zzzz, r7.yzwy, r4.xyzx
    mov r13.w, l(0.180000)
  else 
    ieq r2.y, r0.z, l(2)
    if_nz r2.y
      mul r14.xyz, r9.xzwx, l(0.318309873, 0.318309873, 0.318309873, 0.000000)
      mov r14.w, l(0.0572957806)
      add r2.y, -r5.x, l(1.000000)
      mul r13.xyzw, r2.yyyy, r14.xyzw
    else 
      ieq r2.y, r0.z, l(3)
      if_nz r2.y
        dp3 r2.y, r8.xyzx, r8.xyzx
        min r2.y, r2.y, l(1.000000)
        mul r2.z, r5.z, l(0.080000)
        add r2.y, -r2.y, l(1.000000)
        mul r2.w, r2.y, r2.y
        mul r2.w, r2.w, r2.w
        mad r4.x, -r5.z, l(0.080000), l(1.000000)
        mul r2.w, r2.w, r4.x
        mad r2.y, r2.w, r2.y, r2.z
        add_sat r2.z, r5.y, r5.y
        mad r14.w, r2.z, -r2.y, l(1.000000)
        mul r14.xyz, r9.xzwx, r14.wwww
        mul r13.xyzw, r14.xyzw, l(0.318309873, 0.318309873, 0.318309873, 0.0572957806)
      else 
        ieq r2.y, r0.z, l(5)
        if_nz r2.y
          mul r14.xyz, r9.xzwx, l(0.318309873, 0.318309873, 0.318309873, 0.000000)
          mov r14.w, l(0.0572957806)
          add r15.w, -r5.x, l(1.000000)
          mul r14.xyzw, r14.xyzw, r15.wwww
          mov r15.xyz, r14.xyzx
          mul r15.xyzw, r15.xyzw, l(0.500000, 0.500000, 0.500000, 0.0286478903)
          add r2.y, -r10.y, l(1.000000)
          mul r14.xyzw, r10.yyyy, r14.xyzw
          mul r14.xyzw, r14.xyzw, l(0.250000, 0.250000, 0.250000, 0.250000)
          mad r13.xyzw, r15.xyzw, r2.yyyy, r14.xyzw
        else 
          ieq r2.y, r0.z, l(8)
          dp3 r2.z, r6.xyzx, r8.xyzx
          max r2.w, |r2.z|, l(0.000001)
          rcp r2.w, r2.w
          mul r2.z, r2.w, r2.z
          eq r2.z, r2.z, l(0.000000)
          movc r2.z, r2.z, l(0), l(1.000000)
          mul r4.xyz, r10.xzwx, l(0.318309873, 0.318309873, 0.318309873, 0.000000)
          add r14.w, -r5.x, l(1.000000)
          mul r15.xyz, r4.xyzx, r14.wwww
          mov r15.w, l(0.180000)
          mul r14.xyz, r9.xzwx, r14.wwww
          mul r14.xyzw, r14.xyzw, l(0.318309873, 0.318309873, 0.318309873, 0.0572957806)
          mad r15.xyzw, r2.zzzz, r15.xyzw, r14.xyzw
          mul r16.xyz, r9.xzwx, r10.xxxx
          mov r16.w, r10.x
          mad r14.xyzw, r16.xyzw, l(0.0795774683, 0.0795774683, 0.0795774683, 0.0143239452), r14.xyzw
          movc r13.xyzw, r2.yyyy, r15.xyzw, r14.xyzw
        endif 
      endif 
    endif 
  endif 
  mul r12.xyzw, r11.xyzw, r13.xyzw
endif 
if_nz r7.x
  mov_sat r10.xyzw, r10.xyzw
  mov_sat r5.xyz, r5.xyzx
  mul r2.y, r5.y, r5.y
  max r4.y, r2.y, l(0.001000)
  mul r2.y, r10.z, r10.z
  max r2.y, r2.y, l(0.001000)
  dp3 r2.z, -r8.xyzx, r6.xyzx
  add r2.z, r2.z, r2.z
  mad r7.xyz, r6.xyzx, -r2.zzzz, -r8.xyzx
  dp3 r2.z, r6.xyzx, r7.xyzx
  mad r2.z, -|r2.z|, |r2.z|, l(1.000000)
  mad r2.z, -r2.z, l(0.444702327), l(1.000000)
  add r2.w, r10.x, r10.x
  sqrt r2.z, r2.z
  div r2.z, r2.w, r2.z
  log r11.xyz, r9.xzwx
  mul r13.xyz, r10.yyyy, r11.xyzx
  mul r13.xyz, r13.xyzx, l(-12.780000, -12.780000, -12.780000, 0.000000)
  mad r11.xyz, r11.xyzx, l(-0.020000, -0.020000, -0.020000, 0.000000), r13.xyzx
  eq r2.w, r10.x, l(0.000000)
  mul r6.w, r4.y, r4.y
  div r6.w, l(2.000000), r6.w
  add r6.w, r6.w, l(-2.000000)
  max r6.w, r6.w, l(1.000000031E-022)
  sqrt r6.w, r6.w
  div r6.w, l(-10.000000), r6.w
  exp r6.w, r6.w
  add r6.w, r6.w, l(-0.000980)
  mul_sat r6.w, r6.w, l(1.00795019)
  add r6.w, -r6.w, l(1.000000)
  mul r7.w, r6.w, cb0[183].w
  mul r8.w, r6.w, cb0[174].w
  ge r9.y, l(0.250000), r4.y
  if_nz r9.y
    ge r9.y, r6.z, l(0.250000)
    if_nz r9.y
      dp3 r13.x, r7.xyzx, cb0[51].xyzx
      dp3 r13.y, r7.xyzx, cb0[52].xyzx
      dp3 r13.z, r7.xyzx, cb0[53].xyzx
      dp3 r9.y, r13.xyzx, r13.xyzx
      rsq r9.y, r9.y
      mul r13.xyz, r9.yyyy, r13.xyzx
      ld_indexable(texture2d)(float,float,float,float) r14.x, r1.xyww, t6.xyzw
      mov r14.yw, l(0,1.000000,0,1.000000)
      dp2 r9.y, r14.xyxx, cb0[11].zwzz
      dp2 r10.y, r14.xyxx, cb0[12].zwzz
      div r9.y, -r9.y, r10.y
      mov r15.z, -r9.y
      mul r15.xy, r0.xyxx, r15.zzzz
      dp3 r16.x, r6.xyzx, cb0[51].xyzx
      dp3 r16.y, r6.xyzx, cb0[52].xyzx
      dp3 r16.z, r6.xyzx, cb0[53].xyzx
      mul r9.y, r9.y, l(0.010000)
      max r9.y, r9.y, l(0.001000)
      mad r15.xyz, r16.xyzx, r9.yyyy, r15.xyzx
      mad r9.y, r13.z, l(1000.000000), r15.z
      lt r9.y, l(-0.010000), r9.y
      add r10.y, -r15.z, l(-0.010000)
      div r10.y, r10.y, r13.z
      movc r9.y, r9.y, r10.y, l(1000.000000)
      mad r13.xyz, r13.xyzx, r9.yyyy, r15.xyzx
      mov r15.w, l(1.000000)
      dp4 r14.y, r15.xyzw, cb1[4].xyzw
      dp4 r14.x, r15.xyzw, cb1[5].xyzw
      dp4 r9.y, r15.xyzw, cb1[7].xyzw
      mov r13.w, l(1.000000)
      dp4 r15.x, r13.xyzw, cb1[4].xyzw
      dp4 r15.y, r13.xyzw, cb1[5].xyzw
      dp4 r10.y, r13.xyzw, cb1[7].xyzw
      div r9.y, l(1.000000, 1.000000, 1.000000, 1.000000), r9.y
      div r10.y, l(1.000000, 1.000000, 1.000000, 1.000000), r10.y
      mul r13.xy, r9.yyyy, r14.xyxx
      mul r16.xy, r10.yyyy, r15.xyxx
      mul r11.w, r9.y, r15.z
      mul r13.z, r10.y, r13.z
      add r16.zw, cb0[66].yyyx, l(0.000000, 0.000000, -0.500000, -0.500000)
      lt r17.xy, r16.zwzz, r16.yxyy
      lt r17.zw, r16.yyyx, l(0.000000, 0.000000, 0.500000, 0.500000)
      or r17.zw, r17.zzzw, r17.xxxy
      movc r16.zw, r17.xxxy, -r16.zzzw, l(0,0,-0.500000,-0.500000)
      mad r16.zw, r15.yyyx, r10.yyyy, r16.zzzw
      mad r15.xy, r15.yxyy, r10.yyyy, -r13.xyxx
      div r15.xy, r16.zwzz, r15.xyxx
      and r13.w, r15.x, r17.z
      max r15.x, r15.y, r13.w
      movc r13.w, r17.w, r15.x, r13.w
      mad r15.xy, r14.yxyy, r9.yyyy, -r16.xyxx
      mad r15.xy, r13.wwww, r15.xyxx, r16.xyxx
      add r15.w, r9.y, -r10.y
      mad r10.y, r13.w, r15.w, r10.y
      mad r15.w, r15.z, r9.y, -r13.z
      mad r13.z, r13.w, r15.w, r13.z
      mad r16.xy, r14.yxyy, r9.yyyy, -r15.xyxx
      dp2 r13.w, r16.xyxx, r16.xyxx
      lt r13.w, r13.w, l(0.000100)
      mad r16.xy, r14.yxyy, r9.yyyy, l(0.010000, 0.010000, 0.000000, 0.000000)
      movc r16.xy, r13.wwww, r16.xyxx, r15.xyxx
      mad r16.zw, -r14.yyyx, r9.yyyy, r16.xxxy
      lt r13.w, |r16.z|, |r16.w|
      movc r13.xy, r13.wwww, r13.xyxx, r13.yxyy
      movc r15.xyw, r13.wwww, r16.ywyz, r16.xzxw
      lt r14.x, l(0.000000), r15.y
      lt r14.y, r15.y, l(0.000000)
      iadd r14.x, -r14.x, r14.y
      itof r14.x, r14.x
      div r15.y, r14.x, r15.y
      mul r14.y, r15.w, r15.y
      mad r13.z, -r15.z, r9.y, r13.z
      mul r13.z, r15.y, r13.z
      add r10.y, -r9.y, r10.y
      mul r10.y, r15.y, r10.y
      mul r15.x, r14.x, r15.x
      ge r15.y, r15.z, l(99999.796875)
      ge r15.w, l(100000.000000), r15.z
      and r15.y, r15.w, r15.y
      mov r16.x, r11.w
      mov r16.y, r9.y
      mov r17.xy, l(-1.000000,-1.000000,0,0)
      mov r18.xy, r13.xyxx
      mov r15.w, l(0)
      mov r19.y, r15.z
      mov r17.zw, r15.yyyy
      loop 
        mul r18.z, r14.x, r18.x
        ge r18.z, r15.x, r18.z
        ilt r18.w, r15.w, l(200)
        and r18.z, r18.w, r18.z
        not r18.w, r17.w
        and r18.z, r18.w, r18.z
        breakc_z r18.z
        mad r16.xz, r13.zzzz, l(5.000000, 0.000000, 2.500000, 0.000000), r16.xxxx
        mad r16.yw, r10.yyyy, l(0.000000, 5.000000, 0.000000, 2.500000), r16.yyyy
        div r19.x, r16.z, r16.w
        lt r16.z, r19.x, r19.y
        movc r16.zw, r16.zzzz, r19.xxxy, r19.yyyx
        movc r17.xy, r13.wwww, r18.yxyy, r18.xyxx
        mul r18.zw, r17.xxxy, cb0[66].zzzw
        sample_l_indexable(texture2d)(float,float,float,float) r14.z, r18.zwzz, t6.yzxw, s0, l(0.000000)
        dp2 r18.z, r14.zwzz, cb0[11].zwzz
        dp2 r14.z, r14.zwzz, cb0[12].zwzz
        div r14.z, -r18.z, r14.z
        ge r16.z, -r14.z, r16.z
        add r14.z, -r14.z, l(-0.200000)
        ge r14.z, r16.w, r14.z
        and r17.w, r14.z, r16.z
        mad r18.xy, r14.xyxx, l(5.000000, 5.000000, 0.000000, 0.000000), r18.xyxx
        iadd r15.w, r15.w, l(1)
        mov r17.xyz, r17.xywx
        mov r19.y, r19.x
      endloop 
      if_nz r17.z
        if_z cb1[8].y
          ftoi r13.xy, r17.xyxx
          imax r13.xy, r13.xyxx, l(0, 0, 0, 0)
          ftoi r13.zw, cb0[66].xxxy
          iadd r13.zw, r13.zzzw, l(0, 0, -1, -1)
          imin r13.xy, r13.zwzz, r13.xyxx
          mov r13.zw, l(0,0,0,0)
          ld_indexable(texture2d)(float,float,float,float) r14.xy, r13.xyww, t5.xyzw
          ne r15.xy, r14.xyxx, l(0.000000, 0.000000, 0.000000, 0.000000)
          and r9.y, r15.y, r15.x
          if_nz r9.y
            lt r9.y, l(1.000000), r14.x
            add r10.y, r14.x, l(-2.000000)
            movc r14.x, r9.y, r10.y, r14.x
          else 
            ld_indexable(texture2d)(float,float,float,float) r13.z, r13.xyzw, t6.zwxy
            mov r13.w, l(1.000000)
            dp2 r9.y, r13.zwzz, cb0[11].zwzz
            dp2 r10.y, r13.zwzz, cb0[12].zwzz
            div r9.y, -r9.y, r10.y
            itof r13.xy, r13.xyxx
            mad r13.xy, r13.xyxx, cb0[66].zwzz, l(-0.500000, -0.500000, 0.000000, 0.000000)
            mul r13.xy, r13.xyxx, cb0[0].xyxx
            mul r13.xy, r13.xyxx, l(1.000000, -1.000000, 0.000000, 0.000000)
            div r9.y, r9.y, cb0[67].x
            mov r13.z, -cb0[67].x
            mul r13.xyz, r9.yyyy, r13.xyzx
            mov r13.w, l(1.000000)
            dp4 r15.x, r13.xyzw, cb0[24].xyzw
            dp4 r15.y, r13.xyzw, cb0[25].xyzw
            dp4 r9.y, r13.xyzw, cb0[27].xyzw
            dp4 r16.x, r13.xyzw, cb1[0].xyzw
            dp4 r16.y, r13.xyzw, cb1[1].xyzw
            dp4 r10.y, r13.xyzw, cb1[3].xyzw
            max r10.y, r10.y, l(0.000100)
            div r13.xy, r16.xyxx, r10.yyyy
            div r13.zw, r15.xxxy, r9.yyyy
            add r13.xy, -r13.xyxx, r13.zwzz
            mul r14.xz, r13.xxyx, l(0.500000, 0.000000, 0.500000, 0.000000)
            mov r14.y, -r14.z
          endif 
        else 
          mov r14.xy, l(0,0,0,0)
        endif 
        mad r13.xy, r17.xyxx, cb0[66].zwzz, -r14.xyxx
        add r14.xy, -r17.xyxx, v0.xyxx
        dp2 r9.y, r14.xyxx, r14.xyxx
        sqrt r9.y, r9.y
        ge r10.y, r9.y, l(700.000000)
        add r9.y, r9.y, l(-700.000000)
        mad r9.y, -r9.y, l(0.00333333341), l(1.000000)
        movc r9.y, r10.y, r9.y, l(1.000000)
        add r13.zw, -r13.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
        mul_sat r14.xyzw, r13.xzyw, l(10.000000, 10.000000, 10.000000, 10.000000)
        mul r10.y, r14.y, r14.x
        mul r10.y, r14.z, r10.y
        mul r10.y, r14.w, r10.y
        mul r9.y, r9.y, r10.y
        lt r10.y, l(0.137000), r4.y
        mad r11.w, -r4.y, l(4.000000), l(1.000000)
        max r11.w, r11.w, l(0.000000)
        mul r11.w, r9.y, r11.w
        movc r9.y, r10.y, r11.w, r9.y
      else 
        mov r13.xy, l(0,0,0,0)
        mov r9.y, l(0)
      endif 
      lt r10.y, l(0.000000), r9.y
      if_nz r10.y
        mul r6.w, r6.w, cb1[8].x
        sample_l_indexable(texture2d)(float,float,float,float) r13.xyz, r13.xyxx, t7.xyzw, s1, r6.w
      else 
        mov r13.xyz, l(0,0,0,0)
      endif 
    else 
      mov r13.xyz, l(0,0,0,0)
      mov r9.y, l(0)
    endif 
  else 
    mov r13.xyz, l(0,0,0,0)
    mov r9.y, l(0)
  endif 
  lt r6.w, l(0.000000), r9.y
  if_nz r6.w
    div r13.xyz, r13.xyzx, cb0[176].wwww
    lt r6.w, r9.y, l(1.000000)
    if_nz r6.w
      if_z cb0[184].z
        mov r3.w, l(1.000000)
        mov r14.xyzw, l(0,0,0,0)
        mov r6.w, l(1.000000)
        mov r10.y, l(0)
        loop 
          uge r11.w, r10.y, l(15)
          breakc_nz r11.w
          imul null, r11.w, r10.y, l(7)
          dp4 r15.x, r3.xyzw, cb0[r11.w + 68].xyzw
          dp4 r15.y, r3.xyzw, cb0[r11.w + 69].xyzw
          dp4 r15.z, r3.xyzw, cb0[r11.w + 70].xyzw
          ge r16.xyz, r15.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
          movc r16.xyz, r16.xyzx, cb0[r11.w + 72].xyzx, cb0[r11.w + 73].xyzx
          add r15.xyz, -|r15.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
          mul_sat r15.xyz, r16.xyzx, r15.xyzx
          mul r15.x, r15.y, r15.x
          mul r15.x, r15.z, r15.x
          lt r15.y, l(0.000000), r15.x
          if_nz r15.y
            dp3 r16.x, r7.xyzx, cb0[r11.w + 68].xyzx
            dp3 r16.y, r7.xyzx, cb0[r11.w + 69].xyzx
            dp3 r16.z, r7.xyzx, cb0[r11.w + 70].xyzx
            mul r15.x, r15.x, cb0[r11.w + 73].w
            mov r16.w, cb0[r11.w + 72].w
            sample_l_indexable(texturecubearray)(float,float,float,float) r16.xyzw, r16.xyzw, t3.xyzw, s2, r8.w
            mul r16.xyzw, r16.xyzw, cb0[r11.w + 74].xxxy
            min r11.w, r6.w, r15.x
            mad r15.xyzw, r16.xyzw, r11.wwww, r14.xyzw
            add r11.w, r6.w, -r11.w
            ge r16.x, l(0.000000), r11.w
            if_nz r16.x
              mov r14.xyzw, r15.xyzw
              mov r6.w, r11.w
              break 
            endif 
            mov r14.xyzw, r15.xyzw
            mov r6.w, r11.w
          endif 
          iadd r10.y, r10.y, l(1)
        endloop 
      else 
        mov r14.xyzw, l(0,0,0,0)
        mov r6.w, l(1.000000)
      endif 
      add r10.y, r6.w, r14.w
      mul r10.y, r4.w, r10.y
      lt r11.w, l(0.000000), r10.y
      if_nz r11.w
        add r11.w, -|r7.z|, r7.z
        mad r6.w, r6.w, r11.w, |r7.z|
        mad r6.w, r6.w, l(2.000000), l(2.000000)
        div r15.xy, l(-1.000000, 1.000000, 0.000000, 0.000000), r6.wwww
        mul r15.xy, r7.yxyy, r15.xyxx
        mad r15.xy, r15.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
        sample_l_indexable(texture2d)(float,float,float,float) r15.xyz, r15.xyxx, t2.xyzw, s1, r7.w
        mov_sat r16.xyz, r15.xyzx
        movc r15.xyz, cb0[184].zzzz, r16.xyzx, r15.xyzx
        div r15.xyz, r15.xyzx, cb0[176].wwww
        mad r14.xyz, r15.xyzx, r10.yyyy, r14.xyzx
      endif 
      mov_sat r9.y, r9.y
      add r15.xyz, r13.xyzx, -r14.xyzx
      mad r13.xyz, r9.yyyy, r15.xyzx, r14.xyzx
    endif 
  else 
    if_z cb0[184].z
      mov r3.w, l(1.000000)
      mov r13.xyzw, l(0,0,0,0)
      mov r6.w, l(1.000000)
      mov r9.y, l(0)
      loop 
        uge r10.y, r9.y, l(15)
        breakc_nz r10.y
        imul null, r10.y, r9.y, l(7)
        dp4 r14.x, r3.xyzw, cb0[r10.y + 68].xyzw
        dp4 r14.y, r3.xyzw, cb0[r10.y + 69].xyzw
        dp4 r14.z, r3.xyzw, cb0[r10.y + 70].xyzw
        ge r15.xyz, r14.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
        movc r15.xyz, r15.xyzx, cb0[r10.y + 72].xyzx, cb0[r10.y + 73].xyzx
        add r14.xyz, -|r14.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
        mul_sat r14.xyz, r15.xyzx, r14.xyzx
        mul r11.w, r14.y, r14.x
        mul r11.w, r14.z, r11.w
        lt r14.x, l(0.000000), r11.w
        if_nz r14.x
          dp3 r14.x, r7.xyzx, cb0[r10.y + 68].xyzx
          dp3 r14.y, r7.xyzx, cb0[r10.y + 69].xyzx
          dp3 r14.z, r7.xyzx, cb0[r10.y + 70].xyzx
          mul r11.w, r11.w, cb0[r10.y + 73].w
          mov r14.w, cb0[r10.y + 72].w
          sample_l_indexable(texturecubearray)(float,float,float,float) r14.xyzw, r14.xyzw, t3.xyzw, s2, r8.w
          mul r14.xyzw, r14.xyzw, cb0[r10.y + 74].xxxy
          min r10.y, r6.w, r11.w
          mad r14.xyzw, r14.xyzw, r10.yyyy, r13.xyzw
          add r10.y, r6.w, -r10.y
          ge r11.w, l(0.000000), r10.y
          if_nz r11.w
            mov r13.xyzw, r14.xyzw
            mov r6.w, r10.y
            break 
          endif 
          mov r13.xyzw, r14.xyzw
          mov r6.w, r10.y
        endif 
        iadd r9.y, r9.y, l(1)
      endloop 
    else 
      mov r13.xyzw, l(0,0,0,0)
      mov r6.w, l(1.000000)
    endif 
    add r8.w, r6.w, r13.w
    mul r8.w, r4.w, r8.w
    lt r9.y, l(0.000000), r8.w
    if_nz r9.y
      add r9.y, -|r7.z|, r7.z
      mad r6.w, r6.w, r9.y, |r7.z|
      mad r6.w, r6.w, l(2.000000), l(2.000000)
      div r14.xy, l(-1.000000, 1.000000, 0.000000, 0.000000), r6.wwww
      mul r14.xy, r7.yxyy, r14.xyxx
      mad r14.xy, r14.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
      sample_l_indexable(texture2d)(float,float,float,float) r14.xyz, r14.xyxx, t2.xyzw, s1, r7.w
      mov_sat r15.xyz, r14.xyzx
      movc r14.xyz, cb0[184].zzzz, r15.xyzx, r14.xyzx
      div r14.xyz, r14.xyzx, cb0[176].wwww
      mad r13.xyz, r14.xyzx, r8.wwww, r13.xyzx
    endif 
  endif 
  mul r6.w, r5.z, l(0.080000)
  dp3 r7.w, r6.wwww, l(0.333333343, 0.333333343, 0.333333343, 0.000000)
  mul r7.w, r7.w, l(50.000000)
  min r7.w, r7.w, l(1.000000)
  dp3_sat r4.x, r6.xyzx, r8.xyzx
  sample_l_indexable(texture2d)(float,float,float,float) r14.xy, r4.xyxx, t0.xyzw, s1, l(0.000000)
  mad r6.w, r6.w, r14.x, r14.y
  mul r6.w, r7.w, r6.w
  mul r13.xyz, r6.wwww, r13.xyzx
  mul r13.xyz, r0.wwww, r13.xyzx
  add r2.y, r2.y, r4.y
  min r4.z, r2.y, l(1.000000)
  mul r2.y, r4.z, r4.z
  div r2.y, l(2.000000), r2.y
  add r2.y, r2.y, l(-2.000000)
  max r2.y, r2.y, l(1.000000031E-022)
  sqrt r2.y, r2.y
  div r2.y, l(-10.000000), r2.y
  exp r2.y, r2.y
  add r2.y, r2.y, l(-0.000980)
  mul r2.y, r2.y, l(1.00795019)
  max r2.y, r2.y, l(0.000000)
  add r2.y, -r2.y, l(1.000000)
  mul r4.y, r2.y, cb0[183].w
  mul r6.w, r2.y, cb0[174].w
  ge r7.w, l(0.250000), r4.z
  if_nz r7.w
    ge r7.w, r6.z, l(0.250000)
    if_nz r7.w
      dp3 r14.x, r7.xyzx, cb0[51].xyzx
      dp3 r14.y, r7.xyzx, cb0[52].xyzx
      dp3 r14.z, r7.xyzx, cb0[53].xyzx
      dp3 r7.w, r14.xyzx, r14.xyzx
      rsq r7.w, r7.w
      mul r14.xyz, r7.wwww, r14.xyzx
      ld_indexable(texture2d)(float,float,float,float) r15.x, r1.xyww, t6.xyzw
      mov r15.yw, l(0,1.000000,0,1.000000)
      dp2 r7.w, r15.xyxx, cb0[11].zwzz
      dp2 r8.w, r15.xyxx, cb0[12].zwzz
      div r7.w, -r7.w, r8.w
      mov r16.z, -r7.w
      mul r16.xy, r0.xyxx, r16.zzzz
      dp3 r17.x, r6.xyzx, cb0[51].xyzx
      dp3 r17.y, r6.xyzx, cb0[52].xyzx
      dp3 r17.z, r6.xyzx, cb0[53].xyzx
      mul r7.w, r7.w, l(0.010000)
      max r7.w, r7.w, l(0.001000)
      mad r16.xyz, r17.xyzx, r7.wwww, r16.xyzx
      mad r7.w, r14.z, l(1000.000000), r16.z
      lt r7.w, l(-0.010000), r7.w
      add r8.w, -r16.z, l(-0.010000)
      div r8.w, r8.w, r14.z
      movc r7.w, r7.w, r8.w, l(1000.000000)
      mad r14.xyz, r14.xyzx, r7.wwww, r16.xyzx
      mov r16.w, l(1.000000)
      dp4 r15.y, r16.xyzw, cb1[4].xyzw
      dp4 r15.x, r16.xyzw, cb1[5].xyzw
      dp4 r7.w, r16.xyzw, cb1[7].xyzw
      mov r14.w, l(1.000000)
      dp4 r16.x, r14.xyzw, cb1[4].xyzw
      dp4 r16.y, r14.xyzw, cb1[5].xyzw
      dp4 r8.w, r14.xyzw, cb1[7].xyzw
      div r7.w, l(1.000000, 1.000000, 1.000000, 1.000000), r7.w
      div r8.w, l(1.000000, 1.000000, 1.000000, 1.000000), r8.w
      mul r14.xy, r7.wwww, r15.xyxx
      mul r17.xy, r8.wwww, r16.xyxx
      mul r9.y, r7.w, r16.z
      mul r10.y, r8.w, r14.z
      add r14.zw, cb0[66].yyyx, l(0.000000, 0.000000, -0.500000, -0.500000)
      lt r17.zw, r14.zzzw, r17.yyyx
      lt r18.xy, r17.yxyy, l(0.500000, 0.500000, 0.000000, 0.000000)
      or r18.xy, r17.zwzz, r18.xyxx
      movc r14.zw, r17.zzzw, -r14.zzzw, l(0,0,-0.500000,-0.500000)
      mad r14.zw, r16.yyyx, r8.wwww, r14.zzzw
      mad r16.xy, r16.yxyy, r8.wwww, -r14.xyxx
      div r14.zw, r14.zzzw, r16.xxxy
      and r11.w, r14.z, r18.x
      max r13.w, r14.w, r11.w
      movc r11.w, r18.y, r13.w, r11.w
      mad r14.zw, r15.yyyx, r7.wwww, -r17.xxxy
      mad r14.zw, r11.wwww, r14.zzzw, r17.xxxy
      add r13.w, r7.w, -r8.w
      mad r8.w, r11.w, r13.w, r8.w
      mad r13.w, r16.z, r7.w, -r10.y
      mad r10.y, r11.w, r13.w, r10.y
      mad r16.xy, r15.yxyy, r7.wwww, -r14.zwzz
      dp2 r11.w, r16.xyxx, r16.xyxx
      lt r11.w, r11.w, l(0.000100)
      mad r16.xy, r15.yxyy, r7.wwww, l(0.010000, 0.010000, 0.000000, 0.000000)
      movc r17.xy, r11.wwww, r16.xyxx, r14.zwzz
      mad r17.zw, -r15.yyyx, r7.wwww, r17.xxxy
      lt r11.w, |r17.z|, |r17.w|
      movc r14.xy, r11.wwww, r14.xyxx, r14.yxyy
      movc r16.xyw, r11.wwww, r17.ywyz, r17.xzxw
      lt r13.w, l(0.000000), r16.y
      lt r14.z, r16.y, l(0.000000)
      iadd r13.w, -r13.w, r14.z
      itof r15.x, r13.w
      div r13.w, r15.x, r16.y
      mul r15.y, r16.w, r13.w
      mad r10.y, -r16.z, r7.w, r10.y
      mul r10.y, r13.w, r10.y
      add r8.w, -r7.w, r8.w
      mul r8.w, r13.w, r8.w
      mul r13.w, r15.x, r16.x
      ge r14.z, r16.z, l(99999.796875)
      ge r14.w, l(100000.000000), r16.z
      and r14.z, r14.w, r14.z
      mov r17.x, r9.y
      mov r17.y, r7.w
      mov r16.xy, l(-1.000000,-1.000000,0,0)
      mov r14.w, l(0)
      mov r16.w, r14.z
      mov r19.y, r16.z
      mov r18.xyz, r14.xyzx
      loop 
        mul r18.w, r15.x, r18.x
        ge r18.w, r13.w, r18.w
        ilt r19.z, r14.w, l(200)
        and r18.w, r18.w, r19.z
        not r19.z, r18.z
        and r18.w, r18.w, r19.z
        breakc_z r18.w
        mad r17.xz, r10.yyyy, l(5.000000, 0.000000, 2.500000, 0.000000), r17.xxxx
        mad r17.yw, r8.wwww, l(0.000000, 5.000000, 0.000000, 2.500000), r17.yyyy
        div r19.x, r17.z, r17.w
        lt r17.z, r19.x, r19.y
        movc r17.zw, r17.zzzz, r19.xxxy, r19.yyyx
        movc r16.xy, r11.wwww, r18.yxyy, r18.xyxx
        mul r19.zw, r16.xxxy, cb0[66].zzzw
        sample_l_indexable(texture2d)(float,float,float,float) r15.z, r19.zwzz, t6.yzxw, s0, l(0.000000)
        dp2 r18.w, r15.zwzz, cb0[11].zwzz
        dp2 r15.z, r15.zwzz, cb0[12].zwzz
        div r15.z, -r18.w, r15.z
        ge r17.z, -r15.z, r17.z
        add r15.z, -r15.z, l(-0.200000)
        ge r15.z, r17.w, r15.z
        and r18.z, r15.z, r17.z
        mad r18.xy, r15.xyxx, l(5.000000, 5.000000, 0.000000, 0.000000), r18.xyxx
        iadd r14.w, r14.w, l(1)
        mov r16.w, r18.z
        mov r19.y, r19.x
      endloop 
      if_nz r16.w
        if_z cb1[8].y
          ftoi r14.xy, r16.xyxx
          imax r14.xy, r14.xyxx, l(0, 0, 0, 0)
          ftoi r14.zw, cb0[66].xxxy
          iadd r14.zw, r14.zzzw, l(0, 0, -1, -1)
          imin r14.xy, r14.zwzz, r14.xyxx
          mov r14.zw, l(0,0,0,0)
          ld_indexable(texture2d)(float,float,float,float) r15.xy, r14.xyww, t5.xyzw
          ne r16.zw, r15.xxxy, l(0.000000, 0.000000, 0.000000, 0.000000)
          and r7.w, r16.w, r16.z
          if_nz r7.w
            lt r7.w, l(1.000000), r15.x
            add r8.w, r15.x, l(-2.000000)
            movc r15.x, r7.w, r8.w, r15.x
          else 
            ld_indexable(texture2d)(float,float,float,float) r14.z, r14.xyzw, t6.zwxy
            mov r14.w, l(1.000000)
            dp2 r7.w, r14.zwzz, cb0[11].zwzz
            dp2 r8.w, r14.zwzz, cb0[12].zwzz
            div r7.w, -r7.w, r8.w
            itof r14.xy, r14.xyxx
            mad r14.xy, r14.xyxx, cb0[66].zwzz, l(-0.500000, -0.500000, 0.000000, 0.000000)
            mul r14.xy, r14.xyxx, cb0[0].xyxx
            mul r14.xy, r14.xyxx, l(1.000000, -1.000000, 0.000000, 0.000000)
            div r7.w, r7.w, cb0[67].x
            mov r14.z, -cb0[67].x
            mul r14.xyz, r7.wwww, r14.xyzx
            mov r14.w, l(1.000000)
            dp4 r17.x, r14.xyzw, cb0[24].xyzw
            dp4 r17.y, r14.xyzw, cb0[25].xyzw
            dp4 r7.w, r14.xyzw, cb0[27].xyzw
            dp4 r18.x, r14.xyzw, cb1[0].xyzw
            dp4 r18.y, r14.xyzw, cb1[1].xyzw
            dp4 r8.w, r14.xyzw, cb1[3].xyzw
            max r8.w, r8.w, l(0.000100)
            div r14.xy, r18.xyxx, r8.wwww
            div r14.zw, r17.xxxy, r7.wwww
            add r14.xy, -r14.xyxx, r14.zwzz
            mul r15.xz, r14.xxyx, l(0.500000, 0.000000, 0.500000, 0.000000)
            mov r15.y, -r15.z
          endif 
        else 
          mov r15.xy, l(0,0,0,0)
        endif 
        mad r14.xy, r16.xyxx, cb0[66].zwzz, -r15.xyxx
        add r15.xy, -r16.xyxx, v0.xyxx
        dp2 r7.w, r15.xyxx, r15.xyxx
        sqrt r7.w, r7.w
        ge r8.w, r7.w, l(700.000000)
        add r7.w, r7.w, l(-700.000000)
        mad r7.w, -r7.w, l(0.00333333341), l(1.000000)
        movc r7.w, r8.w, r7.w, l(1.000000)
        add r14.zw, -r14.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
        mul_sat r15.xyzw, r14.xzyw, l(10.000000, 10.000000, 10.000000, 10.000000)
        mul r8.w, r15.y, r15.x
        mul r8.w, r15.z, r8.w
        mul r8.w, r15.w, r8.w
        mul r7.w, r7.w, r8.w
        lt r8.w, l(0.137000), r4.z
        mad r9.y, -r4.z, l(4.000000), l(1.000000)
        max r9.y, r9.y, l(0.000000)
        mul r9.y, r7.w, r9.y
        movc r7.w, r8.w, r9.y, r7.w
      else 
        mov r14.xy, l(0,0,0,0)
        mov r7.w, l(0)
      endif 
      lt r8.w, l(0.000000), r7.w
      if_nz r8.w
        mul r2.y, r2.y, cb1[8].x
        sample_l_indexable(texture2d)(float,float,float,float) r14.xyz, r14.xyxx, t7.xyzw, s1, r2.y
      else 
        mov r14.xyz, l(0,0,0,0)
      endif 
    else 
      mov r14.xyz, l(0,0,0,0)
      mov r7.w, l(0)
    endif 
  else 
    mov r14.xyz, l(0,0,0,0)
    mov r7.w, l(0)
  endif 
  lt r2.y, l(0.000000), r7.w
  if_nz r2.y
    div r14.xyz, r14.xyzx, cb0[176].wwww
    lt r2.y, r7.w, l(1.000000)
    if_nz r2.y
      if_z cb0[184].z
        mov r3.w, l(1.000000)
        mov r15.xyzw, l(0,0,0,0)
        mov r2.y, l(1.000000)
        mov r8.w, l(0)
        loop 
          uge r9.y, r8.w, l(15)
          breakc_nz r9.y
          imul null, r9.y, r8.w, l(7)
          dp4 r16.x, r3.xyzw, cb0[r9.y + 68].xyzw
          dp4 r16.y, r3.xyzw, cb0[r9.y + 69].xyzw
          dp4 r16.z, r3.xyzw, cb0[r9.y + 70].xyzw
          ge r17.xyz, r16.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
          movc r17.xyz, r17.xyzx, cb0[r9.y + 72].xyzx, cb0[r9.y + 73].xyzx
          add r16.xyz, -|r16.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
          mul_sat r16.xyz, r17.xyzx, r16.xyzx
          mul r10.y, r16.y, r16.x
          mul r10.y, r16.z, r10.y
          lt r11.w, l(0.000000), r10.y
          if_nz r11.w
            dp3 r16.x, r7.xyzx, cb0[r9.y + 68].xyzx
            dp3 r16.y, r7.xyzx, cb0[r9.y + 69].xyzx
            dp3 r16.z, r7.xyzx, cb0[r9.y + 70].xyzx
            mul r10.y, r10.y, cb0[r9.y + 73].w
            mov r16.w, cb0[r9.y + 72].w
            sample_l_indexable(texturecubearray)(float,float,float,float) r16.xyzw, r16.xyzw, t3.xyzw, s2, r6.w
            mul r16.xyzw, r16.xyzw, cb0[r9.y + 74].xxxy
            min r9.y, r2.y, r10.y
            mad r16.xyzw, r16.xyzw, r9.yyyy, r15.xyzw
            add r9.y, r2.y, -r9.y
            ge r10.y, l(0.000000), r9.y
            if_nz r10.y
              mov r15.xyzw, r16.xyzw
              mov r2.y, r9.y
              break 
            endif 
            mov r15.xyzw, r16.xyzw
            mov r2.y, r9.y
          endif 
          iadd r8.w, r8.w, l(1)
        endloop 
      else 
        mov r15.xyzw, l(0,0,0,0)
        mov r2.y, l(1.000000)
      endif 
      add r8.w, r2.y, r15.w
      mul r8.w, r4.w, r8.w
      lt r9.y, l(0.000000), r8.w
      if_nz r9.y
        add r9.y, -|r7.z|, r7.z
        mad r2.y, r2.y, r9.y, |r7.z|
        mad r2.y, r2.y, l(2.000000), l(2.000000)
        div r16.xy, l(-1.000000, 1.000000, 0.000000, 0.000000), r2.yyyy
        mul r16.xy, r7.yxyy, r16.xyxx
        mad r16.xy, r16.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
        sample_l_indexable(texture2d)(float,float,float,float) r16.xyz, r16.xyxx, t2.xyzw, s1, r4.y
        mov_sat r17.xyz, r16.xyzx
        movc r16.xyz, cb0[184].zzzz, r17.xyzx, r16.xyzx
        div r16.xyz, r16.xyzx, cb0[176].wwww
        mad r15.xyz, r16.xyzx, r8.wwww, r15.xyzx
      endif 
      mov_sat r7.w, r7.w
      add r16.xyz, r14.xyzx, -r15.xyzx
      mad r14.xyz, r7.wwww, r16.xyzx, r15.xyzx
    endif 
  else 
    if_z cb0[184].z
      mov r3.w, l(1.000000)
      mov r14.xyzw, l(0,0,0,0)
      mov r2.y, l(1.000000)
      mov r7.w, l(0)
      loop 
        uge r8.w, r7.w, l(15)
        breakc_nz r8.w
        imul null, r8.w, r7.w, l(7)
        dp4 r15.x, r3.xyzw, cb0[r8.w + 68].xyzw
        dp4 r15.y, r3.xyzw, cb0[r8.w + 69].xyzw
        dp4 r15.z, r3.xyzw, cb0[r8.w + 70].xyzw
        ge r16.xyz, r15.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
        movc r16.xyz, r16.xyzx, cb0[r8.w + 72].xyzx, cb0[r8.w + 73].xyzx
        add r15.xyz, -|r15.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
        mul_sat r15.xyz, r16.xyzx, r15.xyzx
        mul r9.y, r15.y, r15.x
        mul r9.y, r15.z, r9.y
        lt r10.y, l(0.000000), r9.y
        if_nz r10.y
          dp3 r15.x, r7.xyzx, cb0[r8.w + 68].xyzx
          dp3 r15.y, r7.xyzx, cb0[r8.w + 69].xyzx
          dp3 r15.z, r7.xyzx, cb0[r8.w + 70].xyzx
          mul r9.y, r9.y, cb0[r8.w + 73].w
          mov r15.w, cb0[r8.w + 72].w
          sample_l_indexable(texturecubearray)(float,float,float,float) r15.xyzw, r15.xyzw, t3.xyzw, s2, r6.w
          mul r15.xyzw, r15.xyzw, cb0[r8.w + 74].xxxy
          min r8.w, r2.y, r9.y
          mad r15.xyzw, r15.xyzw, r8.wwww, r14.xyzw
          add r8.w, r2.y, -r8.w
          ge r9.y, l(0.000000), r8.w
          if_nz r9.y
            mov r14.xyzw, r15.xyzw
            mov r2.y, r8.w
            break 
          endif 
          mov r14.xyzw, r15.xyzw
          mov r2.y, r8.w
        endif 
        iadd r7.w, r7.w, l(1)
      endloop 
    else 
      mov r14.xyzw, l(0,0,0,0)
      mov r2.y, l(1.000000)
    endif 
    add r6.w, r2.y, r14.w
    mul r6.w, r4.w, r6.w
    lt r7.w, l(0.000000), r6.w
    if_nz r7.w
      add r7.w, -|r7.z|, r7.z
      mad r2.y, r2.y, r7.w, |r7.z|
      mad r2.y, r2.y, l(2.000000), l(2.000000)
      div r7.zw, l(0.000000, 0.000000, -1.000000, 1.000000), r2.yyyy
      mul r7.xy, r7.zwzz, r7.yxyy
      mad r7.xy, r7.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
      sample_l_indexable(texture2d)(float,float,float,float) r7.xyz, r7.xyxx, t2.xyzw, s1, r4.y
      mov_sat r15.xyz, r7.xyzx
      movc r7.xyz, cb0[184].zzzz, r15.xyzx, r7.xyzx
      div r7.xyz, r7.xyzx, cb0[176].wwww
      mad r14.xyz, r7.xyzx, r6.wwww, r14.xyzx
    endif 
  endif 
  mul r2.y, r10.w, l(0.080000)
  mad r7.xyz, -r10.wwww, l(0.080000, 0.080000, 0.080000, 0.000000), r9.xzwx
  mad r7.xyz, r5.xxxx, r7.xyzx, r2.yyyy
  dp3 r2.y, r7.xyzx, l(0.333333343, 0.333333343, 0.333333343, 0.000000)
  mul_sat r2.y, r2.y, l(50.000000)
  sample_l_indexable(texture2d)(float,float,float,float) r4.xy, r4.xzxx, t0.xyzw, s1, l(0.000000)
  mad r4.xyz, r7.xyzx, r4.xxxx, r4.yyyy
  mul r4.xyz, r2.yyyy, r4.xyzx
  mul r4.xyz, r4.xyzx, r14.xyzx
  mul r4.xyz, r0.wwww, r4.xyzx
  mul r7.xyz, r2.zzzz, -r11.xyzx
  exp r7.xyz, r7.xyzx
  mad r7.xyz, r4.xyzx, r7.xyzx, r13.xyzx
  movc r2.yzw, r2.wwww, r4.xxyz, r7.xxyz
  dp3 r4.x, r2.yzwy, l(0.212639, 0.715168655, 0.0721923187, 0.000000)
else 
  ieq r0.z, r0.z, l(5)
  if_nz r0.z
    dp3 r0.z, -r8.xyzx, r6.xyzx
    add r0.z, r0.z, r0.z
    mad r7.xyz, r6.xyzx, -r0.zzzz, -r8.xyzx
    dp3 r0.z, r7.xyzx, r10.xzwx
    dp3 r4.y, r7.xyzx, r6.xyzx
    mul r7.xyz, r4.yyyy, r6.xyzx
    mad r7.xyz, r10.xzwx, r0.zzzz, r7.xyzx
    dp3 r0.z, r10.xzwx, r8.xyzx
    mad r0.z, -r0.z, r0.z, l(1.000000)
    sqrt r0.z, r0.z
    mul r4.y, r5.y, r5.y
    div r4.y, l(2.000000), r4.y
    add r4.y, r4.y, l(-2.000000)
    max r4.y, r4.y, l(1.000000031E-022)
    sqrt r4.y, r4.y
    div r4.y, l(-10.000000), r4.y
    exp r4.y, r4.y
    add r4.y, r4.y, l(-0.000980)
    mul_sat r4.y, r4.y, l(1.00795019)
    add r4.y, -r4.y, l(1.000000)
    if_z cb0[184].z
      mul r4.z, r4.y, cb0[174].w
      mov r3.w, l(1.000000)
      mov r10.xyzw, l(0,0,0,0)
      mov r6.w, l(1.000000)
      mov r7.w, l(0)
      loop 
        uge r8.w, r7.w, l(15)
        breakc_nz r8.w
        imul null, r8.w, r7.w, l(7)
        dp4 r11.x, r3.xyzw, cb0[r8.w + 68].xyzw
        dp4 r11.y, r3.xyzw, cb0[r8.w + 69].xyzw
        dp4 r11.z, r3.xyzw, cb0[r8.w + 70].xyzw
        ge r13.xyz, r11.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
        movc r13.xyz, r13.xyzx, cb0[r8.w + 72].xyzx, cb0[r8.w + 73].xyzx
        add r11.xyz, -|r11.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
        mul_sat r11.xyz, r13.xyzx, r11.xyzx
        mul r9.y, r11.y, r11.x
        mul r9.y, r11.z, r9.y
        lt r11.x, l(0.000000), r9.y
        if_nz r11.x
          dp3 r11.x, r7.xyzx, cb0[r8.w + 68].xyzx
          dp3 r11.y, r7.xyzx, cb0[r8.w + 69].xyzx
          dp3 r11.z, r7.xyzx, cb0[r8.w + 70].xyzx
          mul r9.y, r9.y, cb0[r8.w + 73].w
          mov r11.w, cb0[r8.w + 72].w
          sample_l_indexable(texturecubearray)(float,float,float,float) r11.xyzw, r11.xyzw, t3.xyzw, s2, r4.z
          mul r11.xyzw, r11.xyzw, cb0[r8.w + 74].xxxy
          min r8.w, r6.w, r9.y
          mad r11.xyzw, r11.xyzw, r8.wwww, r10.xyzw
          add r8.w, r6.w, -r8.w
          ge r9.y, l(0.000000), r8.w
          if_nz r9.y
            mov r10.xyzw, r11.xyzw
            mov r6.w, r8.w
            break 
          endif 
          mov r10.xyzw, r11.xyzw
          mov r6.w, r8.w
        endif 
        iadd r7.w, r7.w, l(1)
      endloop 
    else 
      mov r10.xyzw, l(0,0,0,0)
      mov r6.w, l(1.000000)
    endif 
    add r4.z, r6.w, r10.w
    mul r4.z, r4.w, r4.z
    lt r7.w, l(0.000000), r4.z
    if_nz r7.w
      mul r4.y, r4.y, cb0[183].w
      add r7.w, -|r7.z|, r7.z
      mad r6.w, r6.w, r7.w, |r7.z|
      mad r6.w, r6.w, l(2.000000), l(2.000000)
      div r7.zw, l(0.000000, 0.000000, -1.000000, 1.000000), r6.wwww
      mul r7.xy, r7.zwzz, r7.yxyy
      mad r7.xy, r7.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
      sample_l_indexable(texture2d)(float,float,float,float) r7.xyz, r7.xyxx, t2.xyzw, s1, r4.y
      mov_sat r11.xyz, r7.xyzx
      movc r7.xyz, cb0[184].zzzz, r11.xyzx, r7.xyzx
      div r7.xyz, r7.xyzx, cb0[176].wwww
      mad r10.xyz, r7.xyzx, r4.zzzz, r10.xyzx
    endif 
    sqrt r7.xyz, r9.xzwx
    dp3 r4.y, r9.xzwx, l(0.212639, 0.715168655, 0.0721923187, 0.000000)
    mad r7.xyz, r7.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), -r0.wwww
    mad r7.xyz, r4.yyyy, r7.xyzx, r0.wwww
    mul r7.xyz, r7.xyzx, r10.xyzx
    mul r4.y, r5.z, l(0.080000)
    mad r10.xyz, -r5.zzzz, l(0.080000, 0.080000, 0.080000, 0.000000), r9.xzwx
    mad r10.xyz, r5.xxxx, r10.xyzx, r4.yyyy
    dp3 r4.y, r10.xyzx, l(0.333333343, 0.333333343, 0.333333343, 0.000000)
    mul_sat r4.y, r4.y, l(50.000000)
    dp3_sat r5.w, r6.xyzx, r8.xyzx
    sample_l_indexable(texture2d)(float,float,float,float) r11.xy, r5.wyww, t0.xyzw, s1, l(0.000000)
    mad r10.xyz, r10.xyzx, r11.xxxx, r11.yyyy
    mul r10.xyz, r4.yyyy, r10.xyzx
    mul r10.xyz, r0.zzzz, r10.xyzx
    mul r2.yzw, r7.xxyz, r10.xxyz
    dp3 r4.x, r2.yzwy, l(0.212639, 0.715168655, 0.0721923187, 0.000000)
  else 
    add_sat r0.z, r2.x, r5.y
    dp3 r2.x, -r8.xyzx, r6.xyzx
    add r2.x, r2.x, r2.x
    mad r7.xyz, r6.xyzx, -r2.xxxx, -r8.xyzx
    mul r2.x, r0.z, r0.z
    div r2.x, l(2.000000), r2.x
    add r2.x, r2.x, l(-2.000000)
    max r2.x, r2.x, l(1.000000031E-022)
    sqrt r2.x, r2.x
    div r2.x, l(-10.000000), r2.x
    exp r2.x, r2.x
    add r2.x, r2.x, l(-0.000980)
    mul_sat r2.x, r2.x, l(1.00795019)
    add r2.x, -r2.x, l(1.000000)
    mul r4.y, r2.x, cb0[183].w
    mul r4.z, r2.x, cb0[174].w
    ge r6.w, l(0.250000), r0.z
    if_nz r6.w
      ge r6.w, r6.z, l(0.250000)
      if_nz r6.w
        dp3 r10.x, r7.xyzx, cb0[51].xyzx
        dp3 r10.y, r7.xyzx, cb0[52].xyzx
        dp3 r10.z, r7.xyzx, cb0[53].xyzx
        dp3 r6.w, r10.xyzx, r10.xyzx
        rsq r6.w, r6.w
        mul r10.xyz, r6.wwww, r10.xyzx
        ld_indexable(texture2d)(float,float,float,float) r1.x, r1.xyzw, t6.xyzw
        mov r1.yw, l(0,1.000000,0,1.000000)
        dp2 r6.w, r1.xyxx, cb0[11].zwzz
        dp2 r1.x, r1.xyxx, cb0[12].zwzz
        div r1.x, -r6.w, r1.x
        mov r11.z, -r1.x
        mul r11.xy, r0.xyxx, r11.zzzz
        dp3 r13.x, r6.xyzx, cb0[51].xyzx
        dp3 r13.y, r6.xyzx, cb0[52].xyzx
        dp3 r13.z, r6.xyzx, cb0[53].xyzx
        mul r0.x, r1.x, l(0.010000)
        max r0.x, r0.x, l(0.001000)
        mad r11.xyz, r13.xyzx, r0.xxxx, r11.xyzx
        mad r0.x, r10.z, l(1000.000000), r11.z
        lt r0.x, l(-0.010000), r0.x
        add r0.y, -r11.z, l(-0.010000)
        div r0.y, r0.y, r10.z
        movc r0.x, r0.x, r0.y, l(1000.000000)
        mad r10.xyz, r10.xyzx, r0.xxxx, r11.xyzx
        mov r11.w, l(1.000000)
        dp4 r0.y, r11.xyzw, cb1[4].xyzw
        dp4 r0.x, r11.xyzw, cb1[5].xyzw
        dp4 r1.x, r11.xyzw, cb1[7].xyzw
        mov r10.w, l(1.000000)
        dp4 r11.x, r10.xyzw, cb1[4].xyzw
        dp4 r11.y, r10.xyzw, cb1[5].xyzw
        dp4 r1.y, r10.xyzw, cb1[7].xyzw
        div r1.x, l(1.000000, 1.000000, 1.000000, 1.000000), r1.x
        div r1.y, l(1.000000, 1.000000, 1.000000, 1.000000), r1.y
        mul r10.xy, r0.xyxx, r1.xxxx
        mul r13.xy, r1.yyyy, r11.xyxx
        mul r6.w, r1.x, r11.z
        mul r7.w, r1.y, r10.z
        add r10.zw, cb0[66].yyyx, l(0.000000, 0.000000, -0.500000, -0.500000)
        lt r13.zw, r10.zzzw, r13.yyyx
        lt r14.xy, r13.yxyy, l(0.500000, 0.500000, 0.000000, 0.000000)
        or r14.xy, r13.zwzz, r14.xyxx
        movc r10.zw, r13.zzzw, -r10.zzzw, l(0,0,-0.500000,-0.500000)
        mad r10.zw, r11.yyyx, r1.yyyy, r10.zzzw
        mad r11.xy, r11.yxyy, r1.yyyy, -r10.xyxx
        div r10.zw, r10.zzzw, r11.xxxy
        and r8.w, r10.z, r14.x
        max r9.y, r10.w, r8.w
        movc r8.w, r14.y, r9.y, r8.w
        mad r10.zw, r0.yyyx, r1.xxxx, -r13.xxxy
        mad r10.zw, r8.wwww, r10.zzzw, r13.xxxy
        add r9.y, -r1.y, r1.x
        mad r1.y, r8.w, r9.y, r1.y
        mad r9.y, r11.z, r1.x, -r7.w
        mad r7.w, r8.w, r9.y, r7.w
        mad r11.xy, r0.yxyy, r1.xxxx, -r10.zwzz
        dp2 r8.w, r11.xyxx, r11.xyxx
        lt r8.w, r8.w, l(0.000100)
        mad r11.xy, r0.yxyy, r1.xxxx, l(0.010000, 0.010000, 0.000000, 0.000000)
        movc r13.xy, r8.wwww, r11.xyxx, r10.zwzz
        mad r13.zw, -r0.yyyx, r1.xxxx, r13.xxxy
        lt r0.x, |r13.z|, |r13.w|
        movc r10.xy, r0.xxxx, r10.xyxx, r10.yxyy
        movc r11.xyw, r0.xxxx, r13.ywyz, r13.xzxw
        lt r0.y, l(0.000000), r11.y
        lt r8.w, r11.y, l(0.000000)
        iadd r0.y, -r0.y, r8.w
        itof r13.x, r0.y
        div r0.y, r13.x, r11.y
        mul r13.y, r11.w, r0.y
        mad r7.w, -r11.z, r1.x, r7.w
        mul r7.w, r0.y, r7.w
        add r1.y, -r1.x, r1.y
        mul r0.y, r0.y, r1.y
        mul r1.y, r11.x, r13.x
        ge r8.w, r11.z, l(99999.796875)
        ge r9.y, l(100000.000000), r11.z
        and r8.w, r8.w, r9.y
        mov r14.x, r6.w
        mov r14.y, r1.x
        mov r10.zw, l(0,0,-1.000000,-1.000000)
        mov r11.xy, r10.xyxx
        mov r9.y, l(0)
        mov r11.w, r8.w
        mov r15.y, r11.z
        mov r13.z, r8.w
        loop 
          mul r13.w, r13.x, r11.x
          ge r13.w, r1.y, r13.w
          ilt r15.z, r9.y, l(200)
          and r13.w, r13.w, r15.z
          not r15.z, r13.z
          and r13.w, r13.w, r15.z
          breakc_z r13.w
          mad r14.xz, r7.wwww, l(5.000000, 0.000000, 2.500000, 0.000000), r14.xxxx
          mad r14.yw, r0.yyyy, l(0.000000, 5.000000, 0.000000, 2.500000), r14.yyyy
          div r15.x, r14.z, r14.w
          lt r13.w, r15.x, r15.y
          movc r14.zw, r13.wwww, r15.xxxy, r15.yyyx
          movc r10.zw, r0.xxxx, r11.yyyx, r11.xxxy
          mul r15.zw, r10.zzzw, cb0[66].zzzw
          sample_l_indexable(texture2d)(float,float,float,float) r1.z, r15.zwzz, t6.yzxw, s0, l(0.000000)
          dp2 r13.w, r1.zwzz, cb0[11].zwzz
          dp2 r1.z, r1.zwzz, cb0[12].zwzz
          div r1.z, -r13.w, r1.z
          ge r13.w, -r1.z, r14.z
          add r1.z, -r1.z, l(-0.200000)
          ge r1.z, r14.w, r1.z
          and r13.z, r1.z, r13.w
          mad r11.xy, r13.xyxx, l(5.000000, 5.000000, 0.000000, 0.000000), r11.xyxx
          iadd r9.y, r9.y, l(1)
          mov r11.w, r13.z
          mov r15.y, r15.x
        endloop 
        if_nz r11.w
          if_z cb1[8].y
            ftoi r0.xy, r10.zwzz
            imax r0.xy, r0.xyxx, l(0, 0, 0, 0)
            ftoi r1.xy, cb0[66].xyxx
            iadd r1.xy, r1.xyxx, l(-1, -1, 0, 0)
            imin r1.xy, r0.xyxx, r1.xyxx
            mov r1.zw, l(0,0,0,0)
            ld_indexable(texture2d)(float,float,float,float) r11.xy, r1.xyww, t5.xyzw
            ne r0.xy, r11.xyxx, l(0.000000, 0.000000, 0.000000, 0.000000)
            and r0.x, r0.y, r0.x
            if_nz r0.x
              lt r0.x, l(1.000000), r11.x
              add r0.y, r11.x, l(-2.000000)
              movc r11.x, r0.x, r0.y, r11.x
            else 
              ld_indexable(texture2d)(float,float,float,float) r0.x, r1.xyzw, t6.xyzw
              mov r0.y, l(1.000000)
              dp2 r1.z, r0.xyxx, cb0[11].zwzz
              dp2 r0.x, r0.xyxx, cb0[12].zwzz
              div r0.x, -r1.z, r0.x
              itof r1.xy, r1.xyxx
              mad r1.xy, r1.xyxx, cb0[66].zwzz, l(-0.500000, -0.500000, 0.000000, 0.000000)
              mul r1.xy, r1.xyxx, cb0[0].xyxx
              mul r1.xy, r1.xyxx, l(1.000000, -1.000000, 0.000000, 0.000000)
              div r0.x, r0.x, cb0[67].x
              mov r1.z, -cb0[67].x
              mul r1.xyz, r0.xxxx, r1.xyzx
              mov r1.w, l(1.000000)
              dp4 r0.x, r1.xyzw, cb0[24].xyzw
              dp4 r0.y, r1.xyzw, cb0[25].xyzw
              dp4 r6.w, r1.xyzw, cb0[27].xyzw
              dp4 r10.x, r1.xyzw, cb1[0].xyzw
              dp4 r10.y, r1.xyzw, cb1[1].xyzw
              dp4 r1.x, r1.xyzw, cb1[3].xyzw
              max r1.x, r1.x, l(0.000100)
              div r1.xy, r10.xyxx, r1.xxxx
              div r0.xy, r0.xyxx, r6.wwww
              add r0.xy, -r1.xyxx, r0.xyxx
              mul r11.xz, r0.xxyx, l(0.500000, 0.000000, 0.500000, 0.000000)
              mov r11.y, -r11.z
            endif 
          else 
            mov r11.xy, l(0,0,0,0)
          endif 
          mad r1.xy, r10.zwzz, cb0[66].zwzz, -r11.xyxx
          add r0.xy, -r10.zwzz, v0.xyxx
          dp2 r0.x, r0.xyxx, r0.xyxx
          sqrt r0.x, r0.x
          ge r0.y, r0.x, l(700.000000)
          add r0.x, r0.x, l(-700.000000)
          mad r0.x, -r0.x, l(0.00333333341), l(1.000000)
          movc r0.x, r0.y, r0.x, l(1.000000)
          add r1.zw, -r1.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
          mul_sat r10.xyzw, r1.xzyw, l(10.000000, 10.000000, 10.000000, 10.000000)
          mul r0.y, r10.y, r10.x
          mul r0.y, r10.z, r0.y
          mul r0.y, r10.w, r0.y
          mul r0.x, r0.y, r0.x
          lt r0.y, l(0.137000), r0.z
          mad r0.z, -r0.z, l(4.000000), l(1.000000)
          max r0.z, r0.z, l(0.000000)
          mul r0.z, r0.z, r0.x
          movc r0.x, r0.y, r0.z, r0.x
        else 
          mov r1.xy, l(0,0,0,0)
          mov r0.x, l(0)
        endif 
        lt r0.y, l(0.000000), r0.x
        if_nz r0.y
          mul r0.y, r2.x, cb1[8].x
          sample_l_indexable(texture2d)(float,float,float,float) r1.xyz, r1.xyxx, t7.xyzw, s1, r0.y
        else 
          mov r1.xyz, l(0,0,0,0)
        endif 
      else 
        mov r1.xyz, l(0,0,0,0)
        mov r0.x, l(0)
      endif 
    else 
      mov r1.xyz, l(0,0,0,0)
      mov r0.x, l(0)
    endif 
    lt r0.y, l(0.000000), r0.x
    if_nz r0.y
      div r1.xyz, r1.xyzx, cb0[176].wwww
      lt r0.y, r0.x, l(1.000000)
      if_nz r0.y
        if_z cb0[184].z
          mov r3.w, l(1.000000)
          mov r10.xyzw, l(0,0,0,0)
          mov r0.yz, l(0,1.000000,0,0)
          loop 
            uge r2.x, r0.z, l(15)
            breakc_nz r2.x
            imul null, r2.x, r0.z, l(7)
            dp4 r11.x, r3.xyzw, cb0[r2.x + 68].xyzw
            dp4 r11.y, r3.xyzw, cb0[r2.x + 69].xyzw
            dp4 r11.z, r3.xyzw, cb0[r2.x + 70].xyzw
            ge r13.xyz, r11.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
            movc r13.xyz, r13.xyzx, cb0[r2.x + 72].xyzx, cb0[r2.x + 73].xyzx
            add r11.xyz, -|r11.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
            mul_sat r11.xyz, r13.xyzx, r11.xyzx
            mul r6.w, r11.y, r11.x
            mul r6.w, r11.z, r6.w
            lt r7.w, l(0.000000), r6.w
            if_nz r7.w
              dp3 r11.x, r7.xyzx, cb0[r2.x + 68].xyzx
              dp3 r11.y, r7.xyzx, cb0[r2.x + 69].xyzx
              dp3 r11.z, r7.xyzx, cb0[r2.x + 70].xyzx
              mul r6.w, r6.w, cb0[r2.x + 73].w
              mov r11.w, cb0[r2.x + 72].w
              sample_l_indexable(texturecubearray)(float,float,float,float) r11.xyzw, r11.xyzw, t3.xyzw, s2, r4.z
              mul r11.xyzw, r11.xyzw, cb0[r2.x + 74].xxxy
              min r2.x, r0.y, r6.w
              mad r11.xyzw, r11.xyzw, r2.xxxx, r10.xyzw
              add r2.x, r0.y, -r2.x
              ge r6.w, l(0.000000), r2.x
              if_nz r6.w
                mov r10.xyzw, r11.xyzw
                mov r0.y, r2.x
                break 
              endif 
              mov r10.xyzw, r11.xyzw
              mov r0.y, r2.x
            endif 
            iadd r0.z, r0.z, l(1)
          endloop 
        else 
          mov r10.xyzw, l(0,0,0,0)
          mov r0.y, l(1.000000)
        endif 
        add r0.z, r0.y, r10.w
        mul r0.z, r4.w, r0.z
        lt r2.x, l(0.000000), r0.z
        if_nz r2.x
          add r2.x, -|r7.z|, r7.z
          mad r0.y, r0.y, r2.x, |r7.z|
          mad r0.y, r0.y, l(2.000000), l(2.000000)
          div r11.xy, l(-1.000000, 1.000000, 0.000000, 0.000000), r0.yyyy
          mul r11.xy, r7.yxyy, r11.xyxx
          mad r11.xy, r11.xyxx, l(0.950000, 0.950000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
          sample_l_indexable(texture2d)(float,float,float,float) r11.xyz, r11.xyxx, t2.xyzw, s1, r4.y
          mov_sat r13.xyz, r11.xyzx
          movc r11.xyz, cb0[184].zzzz, r13.xyzx, r11.xyzx
          div r11.xyz, r11.xyzx, cb0[176].wwww
          mad r10.xyz, r11.xyzx, r0.zzzz, r10.xyzx
        endif 
        mov_sat r0.x, r0.x
        add r11.xyz, r1.xyzx, -r10.xyzx
        mad r1.xyz, r0.xxxx, r11.xyzx, r10.xyzx
      endif 
    else 
      if_z cb0[184].z
        mov r3.w, l(1.000000)
        mov r1.xyzw, l(0,0,0,0)
        mov r0.xy, l(1.000000,0,0,0)
        loop 
          uge r0.z, r0.y, l(15)
          breakc_nz r0.z
          imul null, r0.z, r0.y, l(7)
          dp4 r10.x, r3.xyzw, cb0[r0.z + 68].xyzw
          dp4 r10.y, r3.xyzw, cb0[r0.z + 69].xyzw
          dp4 r10.z, r3.xyzw, cb0[r0.z + 70].xyzw
          ge r11.xyz, r10.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
          movc r11.xyz, r11.xyzx, cb0[r0.z + 72].xyzx, cb0[r0.z + 73].xyzx
          add r10.xyz, -|r10.xyzx|, l(1.000000, 1.000000, 1.000000, 0.000000)
          mul_sat r10.xyz, r11.xyzx, r10.xyzx
          mul r2.x, r10.y, r10.x
          mul r2.x, r10.z, r2.x
          lt r6.w, l(0.000000), r2.x
          if_nz r6.w
            dp3 r10.x, r7.xyzx, cb0[r0.z + 68].xyzx
            dp3 r10.y, r7.xyzx, cb0[r0.z + 69].xyzx
            dp3 r10.z, r7.xyzx, cb0[r0.z + 70].xyzx
            mul r2.x, r2.x, cb0[r0.z + 73].w
            mov r10.w, cb0[r0.z + 72].w
            sample_l_indexable(texturecubearray)(float,float,float,float) r10.xyzw, r10.xyzw, t3.xyzw, s2, r4.z
            mul r10.xyzw, r10.xyzw, cb0[r0.z + 74].xxxy
            min r0.z, r0.x, r2.x
            mad r10.xyzw, r10.xyzw, r0.zzzz, r1.xyzw
            add r0.z, -r0.z, r0.x
            ge r2.x, l(0.000000), r0.z
            if_nz r2.x
              mov r1.xyzw, r10.xyzw
              mov r0.x, r0.z
              break 
            endif 
            mov r1.xyzw, r10.xyzw
            mov r0.x, r0.z
          endif 
          iadd r0.y, r0.y, l(1)
        endloop 
      else 
        mov r1.xyzw, l(0,0,0,0)
        mov r0.x, l(1.000000)
      endif 
      add r0.y, r0.x, r1.w
      mul r0.y, r4.w, r0.y
      lt r0.z, l(0.000000), r0.y
      if_nz r0.z
        add r0.z, -|r7.z|, r7.z
        mad r0.x, r0.x, r0.z, |r7.z|
        mad r0.x, r0.x, l(2.000000), l(2.000000)
        div r0.xz, l(-1.000000, 0.000000, 1.000000, 0.000000), r0.xxxx
        mul r0.xz, r0.xxzx, r7.yyxy
        mad r0.xz, r0.xxzx, l(0.950000, 0.000000, 0.950000, 0.000000), l(0.500000, 0.000000, 0.500000, 0.000000)
        sample_l_indexable(texture2d)(float,float,float,float) r3.xyz, r0.xzxx, t2.xyzw, s1, r4.y
        mov_sat r4.yzw, r3.xxyz
        movc r3.xyz, cb0[184].zzzz, r4.yzwy, r3.xyzx
        div r3.xyz, r3.xyzx, cb0[176].wwww
        mad r1.xyz, r3.xyzx, r0.yyyy, r1.xyzx
      endif 
    endif 
    mul r0.x, r5.z, l(0.080000)
    mad r3.xyz, -r5.zzzz, l(0.080000, 0.080000, 0.080000, 0.000000), r9.xzwx
    mad r0.xyz, r5.xxxx, r3.xyzx, r0.xxxx
    dp3 r1.w, r0.xyzx, l(0.333333343, 0.333333343, 0.333333343, 0.000000)
    mul_sat r1.w, r1.w, l(50.000000)
    dp3_sat r5.w, r6.xyzx, r8.xyzx
    sample_l_indexable(texture2d)(float,float,float,float) r3.xy, r5.wyww, t0.xyzw, s1, l(0.000000)
    mad r0.xyz, r0.xyzx, r3.xxxx, r3.yyyy
    mul r0.xyz, r1.wwww, r0.xyzx
    mul r0.xyz, r0.xyzx, r1.xyzx
    mul r2.yzw, r0.wwww, r0.xxyz
    dp3 r4.x, r2.yzwy, l(0.212639, 0.715168655, 0.0721923187, 0.000000)
  endif 
endif 
add r0.x, r4.x, r12.w
add r0.yzw, r2.yyzw, r12.xxyz
mul r0.xyzw, r0.xyzw, cb0[176].wwww
max r0.xyzw, r0.xyzw, l(0.000000, 0.000000, 0.000000, 0.000000)
min o0.xyzw, r0.yzwx, l(64512.000000, 64512.000000, 64512.000000, 64512.000000)
ret 
// Approximately 1448 instruction slots used